// =============================================================================
// BASIC TEXTAREA COMPONENT STYLES
// =============================================================================
@use '../abstracts' as *;

// =============================================================================
// TEXTAREA WRAPPER
// =============================================================================
.default-text-area-wrapper {
    // Textarea specific styles only
    textarea {
        position: relative; /* Relative positioning */
        z-index: 1; /* Layering */
        background: transparent; /* Transparent background */
        margin: 0.875rem 0 0 0; /* No margin */
        border: none; /* No border */
        outline: 0; /* No outline */
        padding: 0 0; /* Padding */
        width: 100%; /* Full width */
        resize: vertical; /* Allow vertical resizing */
        min-height: 1.5rem;

        &::-webkit-scrollbar {
            width: initial;
            height: initial;
        }

        &::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        &::-webkit-scrollbar-thumb {
            background: #888;
            cursor: default;
            &:hover {
                background: #555;
            }
        }

        &.no-resize {
            resize: none; /* Only disable resize if noResize is true */
        }

        &:focus {
            outline: none; /* No outline on focus */
        }
    }

    .char-counter {
        opacity: 0; /* Hidden by default */
        visibility: hidden; /* Hidden by default */
        font-size: 0.75rem; /* Font size */
        min-height: 0.875rem; /* Minimum height */
        min-width: 0.0625rem; /* Minimum width */
        position: relative; /* Relative positioning */
        transform: translateY(-100%); /* Move up */
        transition: all 0.2s ease-in-out; /* Smooth transition */

        &.focused,
        &.persistentDetails {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
    }
}

// =============================================================================
// BASIC INPUT INTEGRATION STYLES
// =============================================================================
.default-text-area-wrapper {
    &.basic-input-wrapper {
        grid-template-areas:
            'prepend control append'
            'a messages b'; /* Define grid areas */
        align-items: initial;

        &.readonly {
            textarea {
                pointer-events: none;
            }
        }

        /* Prepend button styles */
        .prepend-wrapper {
            margin-top: 0.75rem;
        }

        /* Input wrapper styles */
        .input-wrapper {
            align-items: initial;
            grid-template-areas: 'prepend-inner field clear append-inner'; /* Define grid areas */

            .prepend-inner-wrapper {
                margin-top: 0.625rem;
            }

            /* Input field wrapper styles */
            .input-field-wrapper {
                align-items: initial;
                overflow: hidden;
                /* Label styles */
                .label {
                    height: 2.625rem;

                    &.has-inner-prepend {
                        &.floating {
                            animation: float-diagonal 0.2s ease forwards; /* Animation for floating */
                        }
                        &.un-floating {
                            animation: reverse-float-diagonal 0.2s ease forwards; /* Animation for un-floating */
                            height: 2.625rem; /* Full height */
                            top: 1.375rem; /* End vertical position */
                        }
                    }

                    /* Keyframes for floating animation */
                    @keyframes float-diagonal {
                        0% {
                            left: calc(0.625rem + 0.375rem + 1.5rem); /* Start position */
                            top: 2.125rem; /* End vertical position */
                        }
                        100% {
                            left: 0.625rem; /* End position */
                            top: 0; /* End vertical position */
                        }
                    }

                    @keyframes reverse-float-diagonal {
                        0% {
                            left: calc(0.625rem + 0.375rem); /* Start position */
                            top: 0%; /* Start vertical position */
                        }
                        100% {
                            left: calc(0.625rem + 0.375rem + 1.5rem); /* End position */
                            top: 1.375rem; /* End vertical position */
                        }
                    }
                }

                /* Input field styles */
                &:has(.label) {
                    .text-area-field {
                        &:not(:focus) {
                            &::placeholder {
                                visibility: hidden;
                            }
                        }
                    }
                }

                /* Clear button styles */
                &:has(.clear-wrapper) {
                    textarea:focus {
                        visibility: visible;
                        width: calc(100% - 2rem); /* Adjust width when focused */
                    }
                }

                /* Clear button wrapper styles */
                .clear-wrapper {
                    margin-top: 0.625rem;
                }

                /* Show clear button when focused */
                &:focus-within {
                    &:has(.has-value) {
                        textarea {
                            width: calc(100% - 2rem); /* Adjust width when focused */
                        }
                        .clear-wrapper {
                            opacity: 1; /* Show clear button */
                            right: 2.5rem; /* Adjust right position */
                            visibility: visible; /* Make visible */
                        }
                    }
                }
            }

            /* Append inner button styles */
            .append-inner-wrapper {
                margin-top: 0.625rem;
            }
        }

        /* Append button styles */
        .append-wrapper {
            margin-top: 0.75rem;
        }
    }
}
